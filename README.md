# 世界史 Atlas - 改善版

## 主な改善点

### 1. アクセシビリティの大幅向上

#### セマンティックHTML
- `<button>` タグを正しく使用（以前は `<div class="lang-button">`）
- `<header>`, `<main>`, `<footer>`, `<nav>` でページ構造を明確化
- ARIA属性を追加（`role`, `aria-label`, `aria-pressed`, `aria-live`など）

#### キーボードナビゲーション
- **Tab/Shift+Tab**: すべてのインタラクティブ要素を順に移動
- **Enter/Space**: ボタンの実行
- **矢印キー**: 
  - 言語ボタン間の移動
  - タイムラインバーでの年移動（Shift+矢印で100年、Ctrl+矢印で10年）
  - ズームバーでの拡大・縮小
- **Home/End**: タイムラインバーで最初/最後の年へジャンプ
- **Esc**: 年号入力モードのキャンセル
- **+/-**: ズームイン/アウト

#### スクリーンリーダー対応
- すべてのボタンに適切な`aria-label`
- 状態変化を`aria-live`リージョンでアナウンス
- スキップリンク（サイト説明からメインコンテンツへ）
- `.sr-only`クラスで視覚的には非表示だが読み上げられる情報

#### 視覚的フィードバック
- フォーカス時の明確なアウトライン（青色、3px）
- ホバー時のアニメーション
- ボタンの選択状態を色とaria-pressedで表示

---

### 2. レスポンシブデザイン

#### モバイル対応
```css
@media (max-width: 768px) {
    /* 言語ボタンが縦に並ぶ */
    /* ヘッダーが柔軟に高さ調整 */
}

@media (max-width: 480px) {
    /* 地域情報パネルが画面幅に合わせる */
    /* フォントサイズ調整 */
}
```

#### タッチ操作対応
- すべてのボタンが最低44×44pxのタッチターゲット
- 地図ドラッグのカーソル表示（grab/grabbing）

#### ビューポート設定
```html
<meta name="viewport" content="width=device-width, initial-scale=1.0">
```

---

### 3. ユーザビリティの改善

#### サイト説明の追加
```html
<div class="sr-only" id="site-description">
    <h1>世界史 Atlas へようこそ</h1>
    <p>このサイトは、紀元前4000年から現代までの...</p>
    <h2>使い方</h2>
    <ul>...</ul>
</div>
```

- スクリーンリーダーユーザー向けに詳細な使い方
- メタディスクリプションでSEO向上

#### 年号入力の改善
- プレースホルダーテキスト: "年号を入力 (例: 1600)"
- `type="number"` で数値入力専用キーボード表示（モバイル）
- `min`/`max`属性で範囲指定
- 不正な入力時のアラート表示
- クリック可能であることを点線枠で示唆

#### 言語選択の改善
- 国旗絵文字を追加（🇯🇵🇬🇧🇨🇳）で直感的に
- 選択中の言語を青背景で明示
- ホバー時のアニメーション

#### フィードバック機能
- ズーム変更時のアナウンス
- 言語変更時のアナウンス
- 年変更時のアナウンス（スクリーンリーダー向け）
- 範囲外の年号入力時のアラート

---

### 4. その他の改善

#### ダークモード対応
```css
@media (prefers-color-scheme: dark) {
    /* 暗い背景、明るい文字 */
}
```

#### ハイコントラストモード対応
```css
@media (prefers-contrast: high) {
    /* ボーダーを太く */
}
```

#### パフォーマンス関連
- 画像に`aria-hidden="true"`で不要な読み上げを防止
- CSS transitionでスムーズなアニメーション

---

## 使い方（キーボード操作）

### 基本操作
1. **Tab**: 次の要素へフォーカス移動
2. **Shift+Tab**: 前の要素へフォーカス移動
3. **Enter/Space**: ボタンの実行

### ズーム操作
- **矢印キー（上下左右）**: ズームイン/アウト
- **Home**: 最小ズーム
- **End**: 最大ズーム
- **+/-**: ズームイン/アウト

### 年号操作
- **矢印キー（左右）**: 1年ずつ移動
- **Shift+矢印キー**: 100年ずつ移動
- **Ctrl+矢印キー**: 10年ずつ移動
- **PageUp/PageDown**: 100年ずつ移動
- **Home**: 紀元前4000年へ
- **End**: 2019年へ
- **年号をクリック/Enter**: 直接入力モード
- **Esc**: 入力キャンセル

### 言語切り替え
- **矢印キー（左右）**: ボタン間移動
- **Enter/Space**: 言語選択

---

## ブラウザ互換性

- **モダンブラウザ**: Chrome, Firefox, Safari, Edge（最新2バージョン）
- **モバイル**: iOS Safari, Chrome Android
- **スクリーンリーダー**: NVDA, JAWS, VoiceOver

---

## 技術スタック

- バニラJavaScript（ライブラリ不使用）
- セマンティックHTML5
- CSS3（Flexbox、Media Queries、CSS Variables対応準備）
- ARIA 1.2

---

## アクセシビリティ基準

以下の基準に準拠：
- **WCAG 2.1 レベルAA**: 達成目標
- **JIS X 8341-3:2016**: 日本工業規格

主な対応項目：
- ✅ キーボード操作可能
- ✅ フォーカスインジケーター
- ✅ 適切なラベル
- ✅ 状態の通知
- ✅ セマンティックマークアップ
- ✅ レスポンシブデザイン
- ✅ カラーコントラスト（背景をより暗く調整）

---

## 今後の改善案

### まだ対応していない項目

1. **パフォーマンス最適化**
   - 遅延読み込み（lazy loading）
   - 仮想スクロール
   - Service Workerでオフライン対応

2. **国際化**
   - i18nフレームワーク導入
   - RTL（右から左）言語対応

3. **高度なアクセシビリティ**
   - 音声コマンド対応検討
   - 点字ディスプレイ最適化

4. **ユーザー設定**
   - アニメーション速度調整
   - カラーテーマカスタマイズ
   - フォントサイズ調整

---

## ライセンス

元のプロジェクトのライセンスに従います。

## 貢献

アクセシビリティやユーザビリティに関する改善提案を歓迎します。
